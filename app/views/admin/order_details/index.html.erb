<% content_for :title, "Order details" %>

<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl">Order details</h1>
  </div>

  <div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200 rounded-lg shadow-sm overflow-hidden bg-white">
      <thead class="bg-gray-100">
        <tr>
          <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 whitespace-nowrap">Order ID</th>
          <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 whitespace-nowrap">Customer</th>
          <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 whitespace-nowrap">Product</th>
          <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 whitespace-nowrap">Quantity</th>
          <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 whitespace-nowrap">Price</th>
          <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 whitespace-nowrap">Status</th>
          <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 whitespace-nowrap">Actions</th>
        </tr>
      </thead>
      <%
=begin%>
 <tbody class="divide-y divide-blue-100">
        <% if @admin_order_details %>
          <% @admin_order_details.each do |admin_order_detail| %>
            <tr class="hover:bg-gray-50 transition">
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                <%= admin_order_detail.order&.user&.email || "-" %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                <%= admin_order_detail.variant_detail&.product&.name || "Product ##{admin_order_detail.variant_detail_id}" rescue "-" %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                <%= admin_order_detail.quantity || "-" %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                $<%= number_with_precision(admin_order_detail.price, precision: 2) rescue "-" %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <% status = admin_order_detail.status || "pending" %>
                <span class="px-2 py-1 rounded-full text-xs font-medium
                  <%= case status.downcase
                      when 'completed' then 'bg-green-100 text-green-800'
                      when 'processing' then 'bg-blue-100 text-blue-800'
                      when 'shipped' then 'bg-purple-100 text-purple-800'
                      when 'cancelled' then 'bg-red-100 text-red-800'
                      when 'refunded' then 'bg-orange-100 text-orange-800'
                      else 'bg-gray-100 text-gray-800'
                      end %>">
                  <%= status.capitalize %>
                </span>
              </td>
            </tr>
          <% end %>
        <% else %>
          <tr>
            <td colspan="7" class="px-6 py-8 text-center text-gray-500">
              No order details found.
            </td>
          </tr>
        <% end %>
      </tbody> 
<%
=end%>
    </table>
  </div>
</div>